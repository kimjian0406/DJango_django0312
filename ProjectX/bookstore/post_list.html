<!-- post_list.html -->
<h1>Posts</h1>

<!-- 태그 필터링 -->
<div>
    <h3>Filter by Tag:</h3>
    <ul>
        {% for tag in tags %}
            <li><a href="?tag={{ tag.name }}">{{ tag.name }}</a></li>
        {% endfor %}
    </ul>
</div>

<!-- 게시글 리스트 -->
<div>
    {% for post in posts %}
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <p>Tags: {% for tag in post.tags.all %} {{ tag.name }} {% endfor %}</p>
    {% endfor %}
</div>

<h3>Popular Tags:</h3>
<ul>
    {% for tag in tags %}
        <li style="font-size: {{ tag.num_posts|add:"10" }}px;"> <!-- 태그의 사용 횟수에 따라 크기 조절 -->
            <a href="?tag={{ tag.name }}">{{ tag.name }} ({{ tag.num_posts }})</a>
        </li>
    {% endfor %}
</ul>
<form method="get">
    <input type="text" name="search" value="{{ search_query }}" placeholder="Search for posts...">
    <button type="submit">Search</button>
</form>
{% for post in posts %}
    <div>
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <p>Tags: 
            {% for tag in post.tags.all %}
                <span>{{ tag.name }}</span>
            {% endfor %}
        </p>
    </div>
{% endfor %}
{% for post in posts %}
    <div>
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <p>Tags: 
            {% for tag in post.tags.all %}
                <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>
            {% endfor %}
        </p>
    </div>
{% endfor %}

{% if selected_tag %}
    <p>현재 선택된 태그: <strong>{{ selected_tag }}</strong></p>
    <a href="{% url 'post_list' %}">전체 게시글 보기</a>
{% endif %}
<form method="GET" action="{% url 'post_list' %}">
    <input type="text" name="tag" placeholder="태그 검색">
    <button type="submit">검색</button>
</form>
{% if tag_query %}
    <p>‘{{ tag_query }}’ 태그로 검색된 게시글</p>
    <a href="{% url 'post_list' %}">전체 게시글 보기</a>
{% endif %}
{% for post in posts %}
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    
    <p>태그: 
        {% for tag in post.tags.all %}
            <a href="{% url 'posts_by_tag' tag.name %}">#{{ tag.name }}</a>
        {% endfor %}
    </p>
{% endfor %}
{% if query %}
    <h3>"{{ query }}" 검색 결과</h3>
{% endif %}

{% for post in posts %}
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
{% empty %}
    <p>검색 결과가 없습니다.</p>
{% endfor %}
{% for post in posts %}
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    
    <p>
        태그: 
        {% for tag in post.tags.all %}
            <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>
        {% endfor %}
    </p>
{% empty %}
    <p>게시글이 없습니다.</p>
{% endfor %}

{% if tag_name %}
    <h3>"{{ tag_name }}" 태그의 게시글</h3>
{% endif %}
